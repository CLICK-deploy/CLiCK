const n="http://localhost:3001";chrome.runtime.onInstalled.addListener(()=>{console.log("CLICK extension installed.")});chrome.runtime.onMessage.addListener((r,a,o)=>{if(r.type==="ANALYZE_PROMPT")return(async()=>{try{const t=await fetch(`${n}/api/analyze-prompt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:r.userID,chatID:r.chatID,prompt:r.prompt})});if(!t.ok)throw new Error(`Server responded with status: ${t.status}`);const e=await t.json();o(e)}catch(t){console.error("분석 API 요청 실패:",t),o({error:t.message})}})(),!0;if(r.type==="FETCH_RECOMMENDED_PROMPTS")return(async()=>{try{const t=await fetch(`${n}/api/recommended-prompts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:r.userID,chatID:r.chatID})});if(!t.ok)throw new Error(`Server responded with status: ${t.status}`);const e=await t.json();o(e)}catch(t){console.error("추천 프롬프트 API 요청 실패:",t),o({error:t.message})}})(),!0});
